
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>LN Markets API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e9bde216.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript--node&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-1a6155f6.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">curl</a>
              <a href="#" data-language-name="javascript--node">Node.js</a>
              <a href="#" data-language-name="python">Python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#rate-limiter" class="toc-h1 toc-link" data-title="Rate Limiter">Rate Limiter</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#headers" class="toc-h2 toc-link" data-title="Headers">Headers</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#websocket" class="toc-h1 toc-link" data-title="Websocket">Websocket</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#api" class="toc-h1 toc-link" data-title="API v1.0.0">API v1.0.0</a>
          </li>
          <li>
            <a href="#api-login" class="toc-h1 toc-link" data-title="Login">Login</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#request-new-credentials" class="toc-h2 toc-link" data-title="Request new credentials">Request new credentials</a>
                  </li>
                  <li>
                    <a href="#register-new-credentials" class="toc-h2 toc-link" data-title="Register new credentials">Register new credentials</a>
                  </li>
                  <li>
                    <a href="#login-via-credentials" class="toc-h2 toc-link" data-title="Login via credentials">Login via credentials</a>
                  </li>
                  <li>
                    <a href="#login-via-joule" class="toc-h2 toc-link" data-title="Login via Joule">Login via Joule</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-positions" class="toc-h1 toc-link" data-title="Positions">Positions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#cancel" class="toc-h2 toc-link" data-title="Cancel">Cancel</a>
                  </li>
                  <li>
                    <a href="#create" class="toc-h2 toc-link" data-title="Create">Create</a>
                  </li>
                  <li>
                    <a href="#update" class="toc-h2 toc-link" data-title="Update">Update</a>
                  </li>
                  <li>
                    <a href="#close" class="toc-h2 toc-link" data-title="Close">Close</a>
                  </li>
                  <li>
                    <a href="#history" class="toc-h2 toc-link" data-title="History">History</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-user" class="toc-h1 toc-link" data-title="User">User</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#informations" class="toc-h2 toc-link" data-title="Informations">Informations</a>
                  </li>
                  <li>
                    <a href="#update-password" class="toc-h2 toc-link" data-title="Update password">Update password</a>
                  </li>
                  <li>
                    <a href="#transactions" class="toc-h2 toc-link" data-title="Transactions">Transactions</a>
                  </li>
                  <li>
                    <a href="#list-api-tokens" class="toc-h2 toc-link" data-title="List API Tokens">List API Tokens</a>
                  </li>
                  <li>
                    <a href="#revoke-api-token" class="toc-h2 toc-link" data-title="Revoke API Token">Revoke API Token</a>
                  </li>
                  <li>
                    <a href="#generate-api-token" class="toc-h2 toc-link" data-title="Generate API Token">Generate API Token</a>
                  </li>
                  <li>
                    <a href="#deposit" class="toc-h2 toc-link" data-title="Deposit">Deposit</a>
                  </li>
                  <li>
                    <a href="#withdraw-via-invoice" class="toc-h2 toc-link" data-title="Withdraw via invoice">Withdraw via invoice</a>
                  </li>
                  <li>
                    <a href="#withdraw-via-lnurl" class="toc-h2 toc-link" data-title="Withdraw via LNURL">Withdraw via LNURL</a>
                  </li>
                  <li>
                    <a href="#logout" class="toc-h2 toc-link" data-title="Logout">Logout</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-state" class="toc-h1 toc-link" data-title="State">State</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#api-informations" class="toc-h2 toc-link" data-title="API informations">API informations</a>
                  </li>
                  <li>
                    <a href="#node-informations" class="toc-h2 toc-link" data-title="Node informations">Node informations</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-lnurl" class="toc-h1 toc-link" data-title="LNURL">LNURL</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#auth-1" class="toc-h2 toc-link" data-title="Auth 1">Auth 1</a>
                  </li>
                  <li>
                    <a href="#auth-2" class="toc-h2 toc-link" data-title="Auth 2">Auth 2</a>
                  </li>
                  <li>
                    <a href="#withdraw-2" class="toc-h2 toc-link" data-title="Withdraw 2">Withdraw 2</a>
                  </li>
                  <li>
                    <a href="#withdraw-3" class="toc-h2 toc-link" data-title="Withdraw 3">Withdraw 3</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://lnmarkets.com/'>LN Markets - Mainnet</a></li>
            <li><a href='https://testnet.lnmarkets.com/'>LN Markets - Testnet</a></li>
            <li><a href='https://twitter.com/LNMarkets'>Twitter</a></li>
            <li><a href='https://www.t.me/lnmarkets'>Telegram</a></li>
            <li><a href='https://lnmarkets.substack.com/'>Newsletter</a></li>
            <li><a href='https://github.com/lnmarkets'>Github</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>LN Markets proposes a simple REST API to integrate with your program or trading bot.</p>

<p>This API reference provides information on available endpoints and how to interact with it.</p>

<p>The API endpoint for mainnet is : <code>https://api.lnmarkets.com</code></p>

<aside class="notice">
If you want to try our API with <bold>testnet</bold> bitcoin use <code>https://api.testnet.lnmarkets.com</code>
</aside>
<h1 id='authentication'>Authentication</h1>
<p>One type of authentication is required, currently we are using a JSON Web Token (<a href="https://jwt.io/">JWT</a>)</p>

<p>The token can be generated with various scopes such as:
- user
- positions
- deposit
- withdraw</p>

<p>The JWT can be valid for a period of time (15m, 30m, 1h,6h ,12h ,24h , ... 30d) or indefinitely.
The JWT must be provided within the header AUTHORIZATION like :</p>

<p><code>Authorization: Bearer &lt;token&gt;</code></p>

<p><strong>Note :</strong> Never share your JWT !</p>

<p>You can revoke any JWT on your profile page</p>
<h1 id='rate-limiter'>Rate Limiter</h1>
<p>Requests to our REST API are rate limited to 1 requests per second.</p>

<p>Endpoint who does not require authentication are limited to 30 requests per minute.</p>

<p>If you throw too much error such as 4XX or 5XX we could ban your IP for a certain amount of time.</p>
<h3 id='headers'>Headers</h3><div class="highlight"><pre class="highlight plaintext"><code>"retry-after": "14",
"x-ratelimit-remaining": "0",
"x-ratelimit-reset": "1601997680244",
</code></pre></div>
<p>retry-after will tell you how many seconds you need to wait to call this endpoint if your limit is down to 0.</p>

<p>x-ratelimit-remaining is how many request do you have left.</p>

<p>x-ratelimit-reset is the timestamp in ms when you will be granted new points.</p>
<h1 id='websocket'>Websocket</h1>
<p>You can find a websocket endpoint where you can gather realtime data from LN Markets such as bid, offer, index and last price.</p>

<p>The websocket endpoint for mainnet is : <code>wss://api.lnmarkets.com/realtime</code></p>

<p>You are limited to 60 connections per hour</p>

<p>Authentication to websocket will come soon !</p>
<h1 id='errors'>Errors</h1>
<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- Your api key has the wrong scope.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- Not Found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a ressource with an invalid method.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- Your connection is being rate limited</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- Something went wrong !</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>
<!-- Generator: Widdershins v4.0.1 -->

<h1 id="api">API v1.0.0</h1>

<blockquote>
<p>Scroll down for code samples, example requests and responses. Select a language for code samples from the tabs above or the mobile navigation menu.</p>
</blockquote>

<p>Trade derivatives on the <strong><a href="https://lightning.network/">Lightning Network</a></strong>.
You can find our website <strong><a href="https://lnmarkets.com/">here</a></strong>.</p>

<p>Base URLs:</p>

<ul>
<li><p><a href="https://api.lnmarkets.com">https://api.lnmarkets.com</a></p></li>
<li><p><a href="https://api.testnet.lnmarkets.com">https://api.testnet.lnmarkets.com</a></p></li>
</ul>

<h1 id="api-login">Login</h1>

<p>Here you can find the different way to auth yourself on LN Markets, mostly use for browser.</p>
<h2 id='request-new-credentials'>Request new credentials</h2>
<p><a id="opIdLogin_getCredentials"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/login/credentials"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/login/credentials</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/login/credentials <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span>
</code></pre></div>
<p><code>GET /login/credentials</code></p>

<p>Generates an invoice for future use in the account creation process.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"invoice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lntb1u1p0jfxqcpp5ju9y2cur3v7nderx6u6ah7xj82lczem0pmmm4z5n2sn3de4qjqwqdz42pshjgr5dp5hxgrfdemx76trv5s8gmeqvdex2ct5v5s8jmm4wgsxzcmrda6kuapqdahzqnzwypxkzuntv468xcqzpgxqzz6sp53jz0ewjjwvnzkpl9pz8ar506z7dq3e4yw05pj9lulknhrwscncpq9qy9qsqzjvtdmnzptrq8avvynfdkswcts4ll8ffxxu02pgcg2ptyvz4xncsxrx3u32paw4806et6wan6tln60266zpd77a7usyv59jc83mnukqphdr5yx"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiry"</span><span class="p">:</span><span class="w"> </span><span class="mi">90</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="request-new-credentials-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Invoice successfully generated.</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="request-new-credentials-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» invoice</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Invoice string</td>
</tr>
<tr>
<td>» expiry</td>
<td>integer(int32)</td>
<td>false</td>
<td>none</td>
<td>Invoice expiry timer</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='register-new-credentials'>Register new credentials</h2>
<p><a id="opIdLogin_registerCredentials"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/login/credentials"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\"</span><span class="s">login</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">lnmarkets</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">password</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">mYUNh4x0r48L3P422w0rd</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">paymentHash</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">b45dd2e30309aa708a73f0cfa0e38db5bbbbd16055087a692e0711365e7e08f5</span><span class="se">\"</span><span class="s">}"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/login/credentials</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lnmarkets</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">password</span><span class="p">:</span> <span class="dl">'</span><span class="s1">mYUNh4x0r48L3P422w0rd</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">paymentHash</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b45dd2e30309aa708a73f0cfa0e38db5bbbbd16055087a692e0711365e7e08f5</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/login/credentials <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"login":"lnmarkets","password":"mYUNh4x0r48L3P422w0rd","paymentHash":"b45dd2e30309aa708a73f0cfa0e38db5bbbbd16055087a692e0711365e7e08f5"}'</span>
</code></pre></div>
<p><code>PUT /login/credentials</code></p>

<p>Pay the invoice generated through a <code>/login/credentials</code> <strong>GET</strong> request and then
use <code>paymentHash</code> to certify validity and finally create the account.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnmarkets"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mYUNh4x0r48L3P422w0rd"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b45dd2e30309aa708a73f0cfa0e38db5bbbbd16055087a692e0711365e7e08f5"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="register-new-credentials-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» paymentHash</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» login</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» password</td>
<td>body</td>
<td>string(password)</td>
<td>true</td>
<td>none</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnmarkets"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credentials"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="register-new-credentials-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>User successfuly created and logged.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="register-new-credentials-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» username</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User choosen username (May differe from login)</td>
</tr>
<tr>
<td>» balance</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User current balance</td>
</tr>
<tr>
<td>» account_type</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User account type, here credentials</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='login-via-credentials'>Login via credentials</h2>
<p><a id="opIdLogin_loginCredentials"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/login/credentials"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\"</span><span class="s">login</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">lnmarkets</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">password</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">mYUNh4x0r48L3P422w0rd</span><span class="se">\"</span><span class="s">}"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/login/credentials</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span><span class="na">login</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lnmarkets</span><span class="dl">'</span><span class="p">,</span> <span class="na">password</span><span class="p">:</span> <span class="dl">'</span><span class="s1">mYUNh4x0r48L3P422w0rd</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/login/credentials <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"login":"lnmarkets","password":"mYUNh4x0r48L3P422w0rd"}'</span>
</code></pre></div>
<p><code>POST /login/credentials</code></p>

<p>Use existing credentials to log into an account.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnmarkets"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mYUNh4x0r48L3P422w0rd"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="login-via-credentials-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» login</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» password</td>
<td>body</td>
<td>string(password)</td>
<td>true</td>
<td>none</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnmarkets"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credentials"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="login-via-credentials-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Successfuly logged into the account.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="login-via-credentials-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» username</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User choosen username (May differe from login)</td>
</tr>
<tr>
<td>» balance</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User current balance</td>
</tr>
<tr>
<td>» account_type</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User account type, here credentials</td>
</tr>
</tbody></table>
<h3 id='response-headers'>Response Headers</h3>
<table><thead>
<tr>
<th>Status</th>
<th>Header</th>
<th>Type</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>Set-Cookie</td>
<td>string</td>
<td></td>
<td>none</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='login-via-joule'>Login via Joule</h2>
<p><a id="opIdLogin_loginJoule"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/login/joule"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\"</span><span class="s">signature</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">rd1nn7qbnibf58mzaknokqu6eciiqr64gahrzzxy3h8ybdygbun7s86zrms1dedqnh7t4gxz3esqmaqi9pkf85f48rexai7qztbdznfp</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">alias</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">LN-BIG 1337</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">Sign this super secret message</span><span class="se">\"</span><span class="s">}"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/login/joule</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">signature</span><span class="p">:</span> <span class="dl">'</span><span class="s1">rd1nn7qbnibf58mzaknokqu6eciiqr64gahrzzxy3h8ybdygbun7s86zrms1dedqnh7t4gxz3esqmaqi9pkf85f48rexai7qztbdznfp</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">alias</span><span class="p">:</span> <span class="dl">'</span><span class="s1">LN-BIG 1337</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Sign this super secret message</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/login/joule <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"signature":"rd1nn7qbnibf58mzaknokqu6eciiqr64gahrzzxy3h8ybdygbun7s86zrms1dedqnh7t4gxz3esqmaqi9pkf85f48rexai7qztbdznfp","alias":"LN-BIG 1337","message":"Sign this super secret message"}'</span>
</code></pre></div>
<p><code>POST /login/joule</code></p>

<p>Use the browser extension <a href="https://lightningjoule.com/">Joule</a> to authenticate user.
A random message will be signed with the user&#39;s wallet private key,
this message will be send with the signature to allow LND to authenticate the user</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rd1nn7qbnibf58mzaknokqu6eciiqr64gahrzzxy3h8ybdygbun7s86zrms1dedqnh7t4gxz3esqmaqi9pkf85f48rexai7qztbdznfp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LN-BIG 1337"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sign this super secret message"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="login-via-joule-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» message</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Message signed by the wallet private key</td>
</tr>
<tr>
<td>» signature</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Signature created by the wallet</td>
</tr>
<tr>
<td>» alias</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Node alias if avalaible</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"account_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joule"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"linkingpublickey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02b21cc4667e2d5e14920013d187d2af8c3ccfd32a310f63c7767cf8564f126357"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LN-BIG 1337"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="login-via-joule-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Sucessfuly logged user.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="login-via-joule-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» username</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>Username default to node alias</td>
</tr>
<tr>
<td>» balance</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User balance</td>
</tr>
<tr>
<td>» linkingpublickey</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>Pubkey of the node</td>
</tr>
<tr>
<td>» account_type</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>Account type</td>
</tr>
</tbody></table>
<h3 id='response-headers-2'>Response Headers</h3>
<table><thead>
<tr>
<th>Status</th>
<th>Header</th>
<th>Type</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>Set-Cookie</td>
<td>string</td>
<td></td>
<td>none</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>

<h1 id="api-positions">Positions</h1>

<p>Interactions with the market and retrive your positions</p>
<h2 id='cancel'>Cancel</h2>
<p><a id="opIdPosition_cancelPosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/positions/cancel"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\"</span><span class="s">pid</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">b87eef8a-52ab-2fea-1adc-c41fba870b0f</span><span class="se">\"</span><span class="s">}"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/positions/cancel</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span><span class="na">pid</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b87eef8a-52ab-2fea-1adc-c41fba870b0f</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/positions/cancel <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"pid":"b87eef8a-52ab-2fea-1adc-c41fba870b0f"}'</span>
</code></pre></div>
<p><code>POST /positions/cancel</code></p>

<p>Cancel the position linked to the given <code>pid</code>.<strong>Only works on positions that are not currently filled</strong>.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="cancel-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload containing the position id that will be cancelled.</td>
</tr>
<tr>
<td>» pid</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Position ID</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"canceled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"closed_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-11-15T10:50:40.332Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="cancel-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Position is canceled</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="cancel-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» canceled</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Canncel success</td>
</tr>
<tr>
<td>» closed_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the position was canceled</td>
</tr>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position ID</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: positions ), cookieAuth
</aside>
<h2 id='create'>Create</h2>
<p><a id="opIdPosition_createPosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/positions"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">l</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">side</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">b</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">price</span><span class="se">\"</span><span class="s">:10000,</span><span class="se">\"</span><span class="s">stoploss</span><span class="se">\"</span><span class="s">:9000,</span><span class="se">\"</span><span class="s">takeprofit</span><span class="se">\"</span><span class="s">:11000,</span><span class="se">\"</span><span class="s">quantity</span><span class="se">\"</span><span class="s">:100,</span><span class="se">\"</span><span class="s">leverage</span><span class="se">\"</span><span class="s">:50}"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/positions</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">l</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">side</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">price</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="na">stoploss</span><span class="p">:</span> <span class="mi">9000</span><span class="p">,</span>
    <span class="na">takeprofit</span><span class="p">:</span> <span class="mi">11000</span><span class="p">,</span>
    <span class="na">quantity</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="na">leverage</span><span class="p">:</span> <span class="mi">50</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/positions <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"type":"l","side":"b","price":10000,"stoploss":9000,"takeprofit":11000,"quantity":100,"leverage":50}'</span>
</code></pre></div>
<p><code>POST /positions</code></p>

<p>Send the order form parameters to add a new position in database.
<strong>If <code>type=&quot;l&quot;</code>, the property <code>price</code> must be included in the request to know when the position should be filled.</strong>
<strong>You can choose to use the margin or the quantity as a parameter, the other will be calculated with the one you choosed</strong></p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"l"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss"</span><span class="p">:</span><span class="w"> </span><span class="mi">9000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit"</span><span class="p">:</span><span class="w"> </span><span class="mi">11000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="create-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload with all the information needed to setup a new position.</td>
</tr>
<tr>
<td>» type</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Type of the order (Market or Limit)</td>
</tr>
<tr>
<td>» side</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Side of the order (Buy or Sell)</td>
</tr>
<tr>
<td>» margin</td>
<td>body</td>
<td>integer(int32)</td>
<td>false</td>
<td>Margin or quantity should be filled</td>
</tr>
<tr>
<td>» leverage</td>
<td>body</td>
<td>number(double)</td>
<td>true</td>
<td>Leverage of the order</td>
</tr>
<tr>
<td>» quantity</td>
<td>body</td>
<td>number</td>
<td>false</td>
<td>Quantity or margin should be filled</td>
</tr>
<tr>
<td>» takeprofit</td>
<td>body</td>
<td>number(double)</td>
<td>false</td>
<td>Takeprofit level</td>
</tr>
<tr>
<td>» stoploss</td>
<td>body</td>
<td>number(double)</td>
<td>false</td>
<td>Stoploss level</td>
</tr>
<tr>
<td>» price</td>
<td>body</td>
<td>number(double)</td>
<td>false</td>
<td>Required when using a limit order</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload with all the information needed to setup a new position.</p>
<h4 id='enumerated-values'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>» type</td>
<td>l</td>
</tr>
<tr>
<td>» type</td>
<td>m</td>
</tr>
<tr>
<td>» side</td>
<td>b</td>
</tr>
<tr>
<td>» side</td>
<td>s</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"249dc818-f8a5-4713-a3a3-8fe85f2e8969"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">666</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit"</span><span class="p">:</span><span class="w"> </span><span class="mi">13337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">8888</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">-13640</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_filled_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">424242</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liquidation"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="create-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Position sucessfully created.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="create-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>UUID of the position</td>
</tr>
<tr>
<td>» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position ID to be deprecated</td>
</tr>
<tr>
<td>» type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position type [l,m]</td>
</tr>
<tr>
<td>» side</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Side of the position [s,b]</td>
</tr>
<tr>
<td>» price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Entry price of the position</td>
</tr>
<tr>
<td>» quantity</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Quantity of the position</td>
</tr>
<tr>
<td>» margin</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin used for the position creation</td>
</tr>
<tr>
<td>» leverage</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Leverage of the position</td>
</tr>
<tr>
<td>» liquidation</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Liquidation level when the position will be closed</td>
</tr>
<tr>
<td>» market_filled_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>When the order was filled</td>
</tr>
<tr>
<td>» market_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Market working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» pl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
<tr>
<td>» margin_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» stoploss</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>stoploss level</td>
</tr>
<tr>
<td>» stoploss_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Stoploss working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» takeprofit</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit level</td>
</tr>
<tr>
<td>» takeprofit_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the position was created</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: positions ), cookieAuth
</aside>
<h2 id='update'>Update</h2>
<p><a id="opIdPosition_updatePosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/positions"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\"</span><span class="s">pid</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">b87eef8a-52ab-2fea-1adc-c41fba870b0f</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">takeprofit</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:13290.5}"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/positions</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">pid</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b87eef8a-52ab-2fea-1adc-c41fba870b0f</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">takeprofit</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">value</span><span class="p">:</span> <span class="mf">13290.5</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/positions <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"pid":"b87eef8a-52ab-2fea-1adc-c41fba870b0f","type":"takeprofit","value":13290.5}'</span>
</code></pre></div>
<p><code>PUT /positions</code></p>

<p>Allows user to modify <code>stoploss</code> or <code>takeprofit</code> parameters of an existing position.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"takeprofit"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">13290.5</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="update-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» pid</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» type</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» value</td>
<td>body</td>
<td>number</td>
<td>true</td>
<td>none</td>
</tr>
</tbody></table>
<h4 id='enumerated-values-2'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>» type</td>
<td>takeprofit</td>
</tr>
<tr>
<td>» type</td>
<td>stoploss</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="update-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Says whether or not the position was updated.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="update-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position id</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: positions ), cookieAuth
</aside>
<h2 id='close'>Close</h2>
<p><a id="opIdPosition_closePosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/positions"</span>

<span class="n">querystring</span> <span class="o">=</span> <span class="p">{</span><span class="s">"pid"</span><span class="p">:</span><span class="s">"a2ca6172-1078-463d-ae3f-8733f36a9b0e"</span><span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"DELETE"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">querystring</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DELETE</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/positions</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span><span class="na">pid</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a2ca6172-1078-463d-ae3f-8733f36a9b0e</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> DELETE <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.lnmarkets.com/positions?pid=a2ca6172-1078-463d-ae3f-8733f36a9b0e'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>DELETE /positions</code></p>

<p>Close the user position, the PL will be calculated against the current bid or offer
depending on the side of the position</p>

<h3 id="close-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pid</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>ID of the position to close.</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a2ca6172-1078-463d-ae3f-8733f36a9b0e"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"closed_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-10-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="close-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Position is closed</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="close-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» closed</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is position closed</td>
</tr>
<tr>
<td>» closed_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>Position closed ts</td>
</tr>
<tr>
<td>» exit_price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>At which price the position was closed</td>
</tr>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position id</td>
</tr>
<tr>
<td>» pl</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: positions ), cookieAuth
</aside>
<h2 id='history'>History</h2>
<p><a id="opIdPosition_getPositionList"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/positions"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/positions</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/positions <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>GET /positions</code></p>

<p>Retrieves either opened, closed or all positions.</p>

<p><strong>If no parameters is sent, the opened positions are fetched by default.</strong></p>

<h3 id="history-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>query</td>
<td>string</td>
<td>false</td>
<td>List opened positions.</td>
</tr>
</tbody></table>
<h4 id='enumerated-values-3'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>all</td>
</tr>
<tr>
<td>type</td>
<td>open</td>
</tr>
<tr>
<td>type</td>
<td>closed</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"positions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"249dc818-f8a5-4713-a3a3-8fe85f2e8969"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">666</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"takeprofit_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"takeprofit"</span><span class="p">:</span><span class="w"> </span><span class="mi">13337</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stoploss_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stoploss"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sign"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">8888</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">-13640</span><span class="p">,</span><span class="w">
      </span><span class="nl">"market_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"market_filled_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"margin_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"closed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">424242</span><span class="p">,</span><span class="w">
      </span><span class="nl">"liquidation"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
      </span><span class="nl">"exit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"closed_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-10-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"canceled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="history-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Positions history sucessfully fetched.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="history-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>UUID of the position</td>
</tr>
<tr>
<td>» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position ID to be deprecated</td>
</tr>
<tr>
<td>» type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position type [l,m]</td>
</tr>
<tr>
<td>» side</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Side of the position [s,b]</td>
</tr>
<tr>
<td>» pl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
<tr>
<td>» price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Entry price of the position</td>
</tr>
<tr>
<td>» quantity</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Quantity of the position</td>
</tr>
<tr>
<td>» leverage</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Leverage of the position</td>
</tr>
<tr>
<td>» liquidation</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Liquidation level when the position will be closed</td>
</tr>
<tr>
<td>» margin</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin used for the position creation</td>
</tr>
<tr>
<td>» margin_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» market_filled_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>When the order was filled</td>
</tr>
<tr>
<td>» market_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Market working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» canceled</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is the position canceled</td>
</tr>
<tr>
<td>» closed</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is the position closed</td>
</tr>
<tr>
<td>» closed_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>When the position was closed</td>
</tr>
<tr>
<td>» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the position was created</td>
</tr>
<tr>
<td>» exit_price</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>At which price the position was closed</td>
</tr>
<tr>
<td>» stoploss</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>stoploss level</td>
</tr>
<tr>
<td>» stoploss_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Stoploss working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» takeprofit</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit level</td>
</tr>
<tr>
<td>» takeprofit_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit working indicator [filled, running, closed, canceled]</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: positions ), cookieAuth
</aside>

<h1 id="api-user">User</h1>

<p>You can retrieve your user data and modify it</p>
<h2 id='informations'>Informations</h2>
<p><a id="opIdUser_getUser"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/user"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/user</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/user <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>GET /user</code></p>

<p>Fetches UID, username, account type and current balance.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d068f829-26e6-4743-b10d-ebb5a83b3624"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">361086</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joule"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testnet-node"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"linkingpublickey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"035555cbdd2b5642bbd196b31df477fad20125ae99119fd5ffb1d42c7f4811dd3a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="informations-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>User found and informations are fetched.</td>
<td>Inline</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="informations-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» uid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>User&#39;s UUID</td>
</tr>
<tr>
<td>» balance</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>User current balance (avalaible)</td>
</tr>
<tr>
<td>» username</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Username</td>
</tr>
<tr>
<td>» account_type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>One of [&#39;lnurl&#39;, &#39;credentials&#39;, &#39;joule&#39;]</td>
</tr>
<tr>
<td>» linkingpublickey</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Public key used for lnurl or joule account</td>
</tr>
<tr>
<td>» last_ip</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Last login ip</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: user ), cookieAuth
</aside>
<h2 id='update-password'>Update password</h2>
<p><a id="opIdUser_updateUser"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/user"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\"</span><span class="s">previousPassword</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">previousUnguessablePassword</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">newPassword</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">PleaseDontStealMySats</span><span class="se">\"</span><span class="s">}"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/user</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">previousPassword</span><span class="p">:</span> <span class="dl">'</span><span class="s1">previousUnguessablePassword</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">newPassword</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PleaseDontStealMySats</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/user <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"previousPassword":"previousUnguessablePassword","newPassword":"PleaseDontStealMySats"}'</span>
</code></pre></div>
<p><code>PUT /user</code></p>

<p>Update the current password to the requested one.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"previousPassword"</span><span class="p">:</span><span class="w"> </span><span class="s2">"previousUnguessablePassword"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"newPassword"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PleaseDontStealMySats"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="update-password-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload containing user credentials.</td>
</tr>
<tr>
<td>» previousPassword</td>
<td>body</td>
<td>string(password)</td>
<td>true</td>
<td>Old password</td>
</tr>
<tr>
<td>» newPassword</td>
<td>body</td>
<td>string(password)</td>
<td>true</td>
<td>New password wanted by the user</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-2'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload containing user credentials.</p>

<h3 id="update-password-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Password successfuly updated.</td>
<td>None</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: user ), cookieAuth
</aside>
<h2 id='transactions'>Transactions</h2>
<p><a id="opIdUser_getHistory"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/user/history"</span>

<span class="n">querystring</span> <span class="o">=</span> <span class="p">{</span><span class="s">"type"</span><span class="p">:</span><span class="s">"deposit"</span><span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">querystring</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/user/history</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">deposit</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.lnmarkets.com/user/history?type=deposit'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>GET /user/history</code></p>

<p>Retrieves all withdraw or deposit you did with LN Markets</p>

<h3 id="transactions-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Which kind of transactions will be fetched.</td>
</tr>
</tbody></table>
<h4 id='enumerated-values-4'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>withdraw</td>
</tr>
<tr>
<td>type</td>
<td>deposit</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"did"</span><span class="p">:</span><span class="w"> </span><span class="s2">"269157f3-d4a1-4493-afcb-5e8fdaa49288"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">99400</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fail"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fail_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fail_ts"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"payment_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33f45c13c7ddcae46c6732414552893ca599f9399c62ffc2cfae209e8b17c5c3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sucess_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="transactions-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>History sucessfully pulled.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="transactions-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» transaction</td>
<td>[object]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» did</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Deposit ID in case of deposit</td>
</tr>
<tr>
<td>»» wid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Withdraw ID in case of withdraw</td>
</tr>
<tr>
<td>»» amount</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>Amount in sat</td>
</tr>
<tr>
<td>»» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the transaction was initiated</td>
</tr>
<tr>
<td>»» details</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» fail</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is the transaction failed</td>
</tr>
<tr>
<td>»» fail_reason</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» fail_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>When did the transaction failed ?</td>
</tr>
<tr>
<td>»» payment_hash</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» success</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» sucess_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: user ), cookieAuth
</aside>
<h2 id='list-api-tokens'>List API Tokens</h2>
<p><a id="opIdUser_GetJWTList"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/user/jwt"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/user/jwt</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/user/jwt <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span>
</code></pre></div>
<p><code>GET /user/jwt</code></p>

<p>Retrieves the list of active JSON Web Token user currently holds.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"aud"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"withdraw"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"deposit"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"exp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"iat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"jti"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ckea35me20019r8u36374585f"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"revoked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<h3 id="list-api-tokens-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Token list retrieved.</td>
<td>Inline</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="list-api-tokens-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» aud</td>
<td>[string]</td>
<td>false</td>
<td>none</td>
<td>Scopes of the token</td>
</tr>
<tr>
<td>» exp</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>Expiration of the token</td>
</tr>
<tr>
<td>» iat</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the token was issued</td>
</tr>
<tr>
<td>» jti</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Unique id of the token</td>
</tr>
<tr>
<td>» revoked</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is it revoked or not</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
cookieAuth
</aside>
<h2 id='revoke-api-token'>Revoke API Token</h2>
<p><a id="opIdUser_RevokeJWT"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/user/jwt"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"DELETE"</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span><span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DELETE</span><span class="dl">'</span><span class="p">,</span> <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/user/jwt</span><span class="dl">'</span><span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> DELETE <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/user/jwt
</code></pre></div>
<p><code>DELETE /user/jwt</code></p>

<p>Using the <code>jti</code> parameter, identifies and revoke usage of a given JWT.</p>

<h3 id="revoke-api-token-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>jti</td>
<td>query</td>
<td>string</td>
<td>false</td>
<td>Token unique identifier.</td>
</tr>
</tbody></table>

<h3 id="revoke-api-token-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Token successfuly revoked.</td>
<td>None</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
cookieAuth
</aside>
<h2 id='generate-api-token'>Generate API Token</h2>
<p><a id="opIdUser_CreateJWT"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/user/jwt"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\"</span><span class="s">expiry</span><span class="se">\"</span><span class="s">:86400,</span><span class="se">\"</span><span class="s">scopes</span><span class="se">\"</span><span class="s">:[</span><span class="se">\"</span><span class="s">deposit</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">withdraw</span><span class="se">\"</span><span class="s">]}"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/user/jwt</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span><span class="na">expiry</span><span class="p">:</span> <span class="mi">86400</span><span class="p">,</span> <span class="na">scopes</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">deposit</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">withdraw</span><span class="dl">'</span><span class="p">]},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/user/jwt <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"expiry":86400,"scopes":["deposit","withdraw"]}'</span>
</code></pre></div>
<p><code>POST /user/jwt</code></p>

<p>Using the given scopes, allow the token bearer to get access to different parts of the public API.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"expiry"</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scopes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"withdraw"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="generate-api-token-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Scopes of authorization that the token will grant to the bearer.</td>
</tr>
<tr>
<td>» scopes</td>
<td>body</td>
<td>[string]</td>
<td>true</td>
<td>Scopes of the token</td>
</tr>
<tr>
<td>» expiry</td>
<td>body</td>
<td>integer(int32)</td>
<td>true</td>
<td>Expiration of the token</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-3'>Detailed descriptions</h4>
<p><strong>body</strong>: Scopes of authorization that the token will grant to the bearer.</p>
<h4 id='enumerated-values-5'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>» scopes</td>
<td>deposit</td>
</tr>
<tr>
<td>» scopes</td>
<td>withdraw</td>
</tr>
<tr>
<td>» scopes</td>
<td>positions</td>
</tr>
<tr>
<td>» scopes</td>
<td>user</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIiLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjMwMDAiLCJpYXQiOjE1OTgwNTg2NDQsInNjb3BlcyI6WyJ3aXRoZHJhdyIsImRlcG9zaXQiXX0.xJ3f5eMeRiN0eSzo3IDviny9B9v_-bLg4t_EWmXFBxc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="generate-api-token-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Token successfuly created, its Base64URL encoded signature is returned for future use.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="generate-api-token-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» token</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>JWT</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
cookieAuth
</aside>
<h2 id='deposit'>Deposit</h2>
<p><a id="opIdUser_deposit"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/user/deposit"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">:1000,</span><span class="se">\"</span><span class="s">unit</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sat</span><span class="se">\"</span><span class="s">}"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/user/deposit</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span><span class="na">amount</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="na">unit</span><span class="p">:</span> <span class="dl">'</span><span class="s1">sat</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/user/deposit <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"amount":1000,"unit":"sat"}'</span>
</code></pre></div>
<p><code>POST /user/deposit</code></p>

<p>Add fund to your LN Markets balance</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sat"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="deposit-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload that contains all informations to initialize a new deposit.</td>
</tr>
<tr>
<td>» amount</td>
<td>body</td>
<td>integer</td>
<td>true</td>
<td>Amount of sat to deposit on the account</td>
</tr>
<tr>
<td>» unit</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>Should be sat by default</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-4'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload that contains all informations to initialize a new deposit.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"invoice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lntb100u1p0jrfz0pp5q0ntrkf052dvep8w6vf0z77rek3fz8xm6c2yau4zhy7f4mzauqgsdzcf3hy6ctjddjhgueqg3jhqmmnd96zqgmxxquryvesvv6z6dehv43z6drpvycj6wfevs6j6dmyxcunxefcxccxxvn9cqzpgxqzpdsp5z40mxcrfqtsxf55u9ju3lvqdw36htsjh4xl2ujrzdff3953fg2yq9qy9qsqv7gfvp0tryme3e8r5xfrpg39j645302fkggps4h5j0aj708lzdgh2dq3pdz6lqazgvkt3wm7qq20vcff46vu5549m3v2d6h0uw3sjacqrkjqcv"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiry"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="deposit-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>New deposit entry in database waiting for payment. Using <code>paymentRequest</code> afterwards, user will confirm the deposit and funds will be added to his account.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="deposit-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» paymentRequest</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Invoice you should pay to add balance to your account</td>
</tr>
<tr>
<td>» expiry</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>When the invoice will expiry</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: deposit ), cookieAuth
</aside>
<h2 id='withdraw-via-invoice'>Withdraw via invoice</h2>
<p><a id="opIdUser_withdraw"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/user/withdraw"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">:1000,</span><span class="se">\"</span><span class="s">unit</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sat</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">invoice</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">lntb100u1p0jr0ykpp5ldx3un8ym6z0uwjxd083mp2rcr04d2dv0fkx729ajs62pq9pfjqqdql23jhxapdwa5hg6rywfshwttjda6hgegcqzpgxq92fjuqsp5m6q0fzynu2qr624mzjc285duurhccmkfg94mcdctc0p9s7qkrq8q9qy9qsqp862cjznpey5r76e7amhlpmhwn2c7xvke59srhv0xf75m4ksjm4hzn8y9xy0zs5ec6gxmsr8gj4q23w8ped32llscjcneyjz2afeapqpu4gamz</span><span class="se">\"</span><span class="s">}"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/user/withdraw</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="na">unit</span><span class="p">:</span> <span class="dl">'</span><span class="s1">sat</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">invoice</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lntb100u1p0jr0ykpp5ldx3un8ym6z0uwjxd083mp2rcr04d2dv0fkx729ajs62pq9pfjqqdql23jhxapdwa5hg6rywfshwttjda6hgegcqzpgxq92fjuqsp5m6q0fzynu2qr624mzjc285duurhccmkfg94mcdctc0p9s7qkrq8q9qy9qsqp862cjznpey5r76e7amhlpmhwn2c7xvke59srhv0xf75m4ksjm4hzn8y9xy0zs5ec6gxmsr8gj4q23w8ped32llscjcneyjz2afeapqpu4gamz</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/user/withdraw <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"amount":1000,"unit":"sat","invoice":"lntb100u1p0jr0ykpp5ldx3un8ym6z0uwjxd083mp2rcr04d2dv0fkx729ajs62pq9pfjqqdql23jhxapdwa5hg6rywfshwttjda6hgegcqzpgxq92fjuqsp5m6q0fzynu2qr624mzjc285duurhccmkfg94mcdctc0p9s7qkrq8q9qy9qsqp862cjznpey5r76e7amhlpmhwn2c7xvke59srhv0xf75m4ksjm4hzn8y9xy0zs5ec6gxmsr8gj4q23w8ped32llscjcneyjz2afeapqpu4gamz"}'</span>
</code></pre></div>
<p><code>POST /user/withdraw</code></p>

<p>Move funds from the <strong><a href="https://medium.com/suredbits/lightning-101-what-are-lightning-channels-cfb80f440298">Lightning channel</a></strong> with LN Markets to user wallet by using an invoice directly.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sat"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lntb100u1p0jr0ykpp5ldx3un8ym6z0uwjxd083mp2rcr04d2dv0fkx729ajs62pq9pfjqqdql23jhxapdwa5hg6rywfshwttjda6hgegcqzpgxq92fjuqsp5m6q0fzynu2qr624mzjc285duurhccmkfg94mcdctc0p9s7qkrq8q9qy9qsqp862cjznpey5r76e7amhlpmhwn2c7xvke59srhv0xf75m4ksjm4hzn8y9xy0zs5ec6gxmsr8gj4q23w8ped32llscjcneyjz2afeapqpu4gamz"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="withdraw-via-invoice-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload that countains all informations to initiate a new withdraw.</td>
</tr>
<tr>
<td>» amount</td>
<td>body</td>
<td>integer</td>
<td>true</td>
<td>Amount you want to withdraw</td>
</tr>
<tr>
<td>» unit</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>Unit (Only sat for now)</td>
</tr>
<tr>
<td>» invoice</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Bolt 11 invoice with the same amount as the request withdraw amount</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-5'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload that countains all informations to initiate a new withdraw.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentsecret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b84c9852e929f99700b6cbabc4ca9d1593afc3736938b348c4d3d143e418bd4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"wid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3fcbd8b7-c35b-4e83-87bc-111d5bd186b7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymenthash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fb4d1e4ce4de84fe3a466bcf1d8543c0df56a9ac7a6c6f28bd9434a080a14c80"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="withdraw-via-invoice-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Funds are removed from user account and added to user wallet.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="withdraw-via-invoice-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» amount</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>Amount withdrawnd</td>
</tr>
<tr>
<td>» paymentsecret</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Payment secret of the settled invoice</td>
</tr>
<tr>
<td>» wid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Withdraw ID</td>
</tr>
<tr>
<td>» paymenthash</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Payment hash for the settled invoice</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: withdraw ), cookieAuth
</aside>
<h2 id='withdraw-via-lnurl'>Withdraw via LNURL</h2>
<p><a id="opIdUser_withdrawLnurl"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/user/withdraw/lnurl"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">:1000}"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/user/withdraw/lnurl</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span><span class="na">amount</span><span class="p">:</span> <span class="mi">1000</span><span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/user/withdraw/lnurl <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"amount":1000}'</span>
</code></pre></div>
<p><code>POST /user/withdraw/lnurl</code></p>

<p>Create a LNURL Withdraw.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="withdraw-via-lnurl-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Amount the user wants to withdraw.</td>
</tr>
<tr>
<td>» amount</td>
<td>body</td>
<td>integer</td>
<td>true</td>
<td>amount you want to withdraw</td>
</tr>
<tr>
<td>» unit</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>Unit (Only sat for now)</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-6'>Detailed descriptions</h4>
<p><strong>body</strong>: Amount the user wants to withdraw.</p>
<h4 id='enumerated-values-6'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>» unit</td>
<td>sat</td>
</tr>
<tr>
<td>» unit</td>
<td>msat</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"lnurl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LNURL1DP68GURN8GHJ7UM9WFMXJCM99E3K7MF0V9CXJ0M385EKVCENXC6R2C35XVUKXEFCV5MKVV34X5EKZD3EV56NYD3HXQURZEPEXEJXXEPNXSCRVWFNV9NXZCN9XQ6XYEFHVGCXXCMYXYMNSERXFQ5FNS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="withdraw-via-lnurl-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>LNURL Bech32 encoded string</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="withdraw-via-lnurl-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» lnurl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>LNURL for the users wallet</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: withdraw ), cookieAuth
</aside>
<h2 id='logout'>Logout</h2>
<p><a id="opIdUser_logout"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/user/logout"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span><span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span> <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/user/logout</span><span class="dl">'</span><span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/user/logout
</code></pre></div>
<p><code>POST /user/logout</code></p>

<p>Delete the session cookie.</p>

<h3 id="logout-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Sucessfully logged out.</td>
<td>None</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>

<h1 id="api-state">State</h1>

<p>LN Markets state with data about our node and api availability</p>
<h2 id='api-informations'>API informations</h2>
<p><a id="opIdState_apiState"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/state"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/state</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/state <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span>
</code></pre></div>
<p><code>GET /state</code></p>

<p>Shows informations about api.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1600244845097</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74958cef7d4416dfa7f2c13fd23cd4aa7b469047"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"soec"</span><span class="p">:</span><span class="w"> </span><span class="s2">"31a4964e0ab4c77e7235ce5a0b458ba32dd8ace8"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"withdraw"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"newPosition"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountCreation"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="api-informations-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>The API is online.</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="api-informations-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» ts</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Timestamp reported by the API</td>
</tr>
<tr>
<td>» version</td>
<td>object</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» api</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>API version hash</td>
</tr>
<tr>
<td>»» spec</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Open API version hash</td>
</tr>
<tr>
<td>» withdraw</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Are withdraw enabled ?</td>
</tr>
<tr>
<td>» newposition</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Are new position enabled ?</td>
</tr>
<tr>
<td>» accountCreation</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Are account creation enabled ?</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='node-informations'>Node informations</h2>
<p><a id="opIdState_nodeState"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/state/node"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/state/node</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/state/node <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span>
</code></pre></div>
<p><code>GET /state/node</code></p>

<p>Shows informations about the lightning node.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.11.0-beta commit=v0.11.0-beta'"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LN Markets"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03bae2db4b57738c1ec1ffa1c5e5a4423968cc592b3b39cddf7d495e72919d6431"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blockHeigth"</span><span class="p">:</span><span class="w"> </span><span class="mi">1835008</span><span class="p">,</span><span class="w">
  </span><span class="nl">"remoteBalance"</span><span class="p">:</span><span class="w"> </span><span class="mi">266903254</span><span class="p">,</span><span class="w">
  </span><span class="nl">"example"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localBalance"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"channels"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"peers"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nl">"onionUri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03bae2db4b57738c1ec1ffa1c5e5a4423968cc592b3b39cddf7d495e72919d6431@3pv4ci27cnahbztwlqtbez36rblecanoyxthrtjvxpk3en2y7dxfr3id.onion:9735"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03bae2db4b57738c1ec1ffa1c5e5a4423968cc592b3b39cddf7d495e72919d6431@34.192.102.161:9735"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="node-informations-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>The Node is online.</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="node-informations-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» version</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>LND version</td>
</tr>
<tr>
<td>» alias</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Node Alias</td>
</tr>
<tr>
<td>» pubkey</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Node pubkey</td>
</tr>
<tr>
<td>» uri</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Node URI</td>
</tr>
<tr>
<td>» onionUri</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Node URI on tor</td>
</tr>
<tr>
<td>» peers</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Number of peers</td>
</tr>
<tr>
<td>» channels</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Number of channels</td>
</tr>
<tr>
<td>» localBalance</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Node local balance</td>
</tr>
<tr>
<td>» remoteBalance</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Node remote balance</td>
</tr>
<tr>
<td>» blockHeigth</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Node block heigth</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>

<h1 id="api-lnurl">LNURL</h1>

<p>Interaction with the lightning network using the <a href="https://github.com/btcontract/lnurl-rfc/">LNURL procotocol</a>
LNURL enable simple auth process and easier withdraw</p>
<h2 id='auth-1'>Auth 1</h2>
<p><a id="opIdLNURL_authCreate"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/lnurl/a/c"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/lnurl/a/c</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/lnurl/a/c <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span>
</code></pre></div>
<p><code>GET /lnurl/a/c</code></p>

<p>LNURL string used to create an account or connect to a existing account.
The user wallet will sign a message using the provided k1 inside the LNURL.
You need to have a session cookie on the browser you are using to log in.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"lnurl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnurl1dp68gup69uhkcmmrv9kxsmmnwsarxvpsxqhkcmn4wfkz7cflw3skw0tvdankjm3xdvcn6venvgcrjenpx3nrwdtpxsur2vfsvdjk2dfkxe3kgceexymkgcmrxpjkgc3jvgmrqdnzvvurjwtr89jk2dp4vccrxvmrvvmxzdehxuejv6rdv93n6wpkv56rxcf4xqcxgwfsvsuxget9vymnqcfnv43rgwfjv5ex2cn9vyckgwtyvejrgc3excekyetpx43rvd3nxeskxvm9xqcxvwtpv5mq9uwr0k"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="auth-1-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Bech32 encoded string.</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="auth-1-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» lnurl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>LNURL used by the wallet</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='auth-2'>Auth 2</h2>
<p><a id="opIdLNURL_authenticate"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/lnurl/a"</span>

<span class="n">querystring</span> <span class="o">=</span> <span class="p">{</span><span class="s">"k1"</span><span class="p">:</span><span class="s">"kyNVmR6HDtAW2aplYk6XmmpDrIhvzzq6"</span><span class="p">,</span><span class="s">"tag"</span><span class="p">:</span><span class="s">"login"</span><span class="p">,</span><span class="s">"sig"</span><span class="p">:</span><span class="s">"qep5sAqwleQS27UdKLGNsCBTWB4soS45us9vJAbk1hMEdCAXoeB6IESi3Nz7SXJM"</span><span class="p">,</span><span class="s">"key"</span><span class="p">:</span><span class="s">"Yc4h1Z5BZVmgmVQfIbdPWRVj9kHAo3uf"</span><span class="p">,</span><span class="s">"hmac"</span><span class="p">:</span><span class="s">"kuSHSXXDiP4qofiL2LGelesLLlRXUCJd"</span><span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">querystring</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/lnurl/a</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">k1</span><span class="p">:</span> <span class="dl">'</span><span class="s1">kyNVmR6HDtAW2aplYk6XmmpDrIhvzzq6</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">tag</span><span class="p">:</span> <span class="dl">'</span><span class="s1">login</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">sig</span><span class="p">:</span> <span class="dl">'</span><span class="s1">qep5sAqwleQS27UdKLGNsCBTWB4soS45us9vJAbk1hMEdCAXoeB6IESi3Nz7SXJM</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Yc4h1Z5BZVmgmVQfIbdPWRVj9kHAo3uf</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">hmac</span><span class="p">:</span> <span class="dl">'</span><span class="s1">kuSHSXXDiP4qofiL2LGelesLLlRXUCJd</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.lnmarkets.com/lnurl/a?k1=kyNVmR6HDtAW2aplYk6XmmpDrIhvzzq6&amp;tag=login&amp;sig=qep5sAqwleQS27UdKLGNsCBTWB4soS45us9vJAbk1hMEdCAXoeB6IESi3Nz7SXJM&amp;key=Yc4h1Z5BZVmgmVQfIbdPWRVj9kHAo3uf&amp;hmac=kuSHSXXDiP4qofiL2LGelesLLlRXUCJd'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span>
</code></pre></div>
<p><code>GET /lnurl/a</code></p>

<p>Verify the public key with the signature and the k1 to create a account or connect into a existing account.
The connected state will be push over websocketsto the client.</p>

<h3 id="auth-2-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>k1</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Hex encoded 32 bytes of challenge which is going to be signed by user private key.</td>
</tr>
<tr>
<td>tag</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>LNURL type.</td>
</tr>
<tr>
<td>sig</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Signature generated by the lightning wallet.</td>
</tr>
<tr>
<td>key</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Public key of the lightning wallet.</td>
</tr>
<tr>
<td>hmac</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>HMAC signature used to secure LNURL.</td>
</tr>
<tr>
<td>t</td>
<td>query</td>
<td>string</td>
<td>false</td>
<td>Timestamp.</td>
</tr>
</tbody></table>
<h4 id='enumerated-values-7'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>tag</td>
<td>login</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LOGGEDIN"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="auth-2-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Sucessfuly logged in.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="auth-2-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» status</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Does the request suceed ?</td>
</tr>
<tr>
<td>» event</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>State of the user</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='withdraw-2'>Withdraw 2</h2>
<p><a id="opIdLNURL_WithdrawRequest"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/lnurl/w/r"</span>

<span class="n">querystring</span> <span class="o">=</span> <span class="p">{</span><span class="s">"signature"</span><span class="p">:</span><span class="s">"type,string"</span><span class="p">,</span><span class="s">"n"</span><span class="p">:</span><span class="s">"type,string,minLength,64,maxLength,64"</span><span class="p">,</span><span class="s">"expiry"</span><span class="p">:</span><span class="s">"1599841538304"</span><span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">querystring</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/lnurl/w/r</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">signature</span><span class="p">:</span> <span class="dl">'</span><span class="s1">type,string</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">n</span><span class="p">:</span> <span class="dl">'</span><span class="s1">type,string,minLength,64,maxLength,64</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">expiry</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1599841538304</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.lnmarkets.com/lnurl/w/r?signature=type%2Cstring&amp;n=type%2Cstring%2CminLength%2C64%2CmaxLength%2C64&amp;expiry=1599841538304'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'accept: application/json'</span>
</code></pre></div>
<p><code>GET /lnurl/w/r</code></p>

<p>Ask the Lightning wallet to create an invoice with amount and description.</p>

<h3 id="withdraw-2-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>signature</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>HMAC payload signature.</td>
</tr>
<tr>
<td>n</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Nonce.</td>
</tr>
<tr>
<td>expiry</td>
<td>query</td>
<td>integer</td>
<td>true</td>
<td>Timestamp when the LNURL is expired.</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"k1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"31c92c1bd79d2ae5f96a153ceda105cb67888c61bfb76baa1d2505a6bf8a06ca"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"withdrawRequest"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maxWithdrawable"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"minWithdrawable"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"defaultDescription"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LN Markets withdraw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"callback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.lnmarkets.com/lnurl/w"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="withdraw-2-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>LNURL withdraw invoice parameter.</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="withdraw-2-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» callback</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Callback URL used by the wallet</td>
</tr>
<tr>
<td>» defaultDescription</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Invoice default description</td>
</tr>
<tr>
<td>» tag</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Kind of LNURL</td>
</tr>
<tr>
<td>» maxWithdrawable</td>
<td>integer(int32)</td>
<td>false</td>
<td>none</td>
<td>Max withdrawable amount</td>
</tr>
<tr>
<td>» minWithdrawable</td>
<td>integer(int32)</td>
<td>false</td>
<td>none</td>
<td>Min withdrawable amount</td>
</tr>
<tr>
<td>» k1</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Random hex string to identify the user Lightning Wallet.</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='withdraw-3'>Withdraw 3</h2>
<p><a id="opIdLNURL_Withdraw"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/lnurl/w"</span>

<span class="n">querystring</span> <span class="o">=</span> <span class="p">{</span><span class="s">"k1"</span><span class="p">:</span><span class="s">"kyNVmR6HDtAW2aplYk6XmmpDrIhvzzq6"</span><span class="p">,</span><span class="s">"pr"</span><span class="p">:</span><span class="s">"&lt;invoice&gt;"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">querystring</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/lnurl/w</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span><span class="na">k1</span><span class="p">:</span> <span class="dl">'</span><span class="s1">kyNVmR6HDtAW2aplYk6XmmpDrIhvzzq6</span><span class="dl">'</span><span class="p">,</span> <span class="na">pr</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;invoice&gt;</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.lnmarkets.com/lnurl/w?k1=kyNVmR6HDtAW2aplYk6XmmpDrIhvzzq6&amp;pr=%3Cinvoice%3E'</span>
</code></pre></div>
<p><code>GET /lnurl/w</code></p>

<p>Use LNURL to withdraw from the user balance.</p>

<h3 id="withdraw-3-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>k1</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Random hex string to identify the user Lightning Wallet.</td>
</tr>
<tr>
<td>pr</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Bolt 11 invoice.</td>
</tr>
</tbody></table>

<h3 id="withdraw-3-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Sucessfuly withdrawn funds from channel.</td>
<td>None</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>

<p>undefined</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">curl</a>
                <a href="#" data-language-name="javascript--node">Node.js</a>
                <a href="#" data-language-name="python">Python</a>
          </div>
      </div>
    </div>
  </body>
</html>
